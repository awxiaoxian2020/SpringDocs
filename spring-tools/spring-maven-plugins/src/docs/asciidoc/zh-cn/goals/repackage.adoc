

[[goals-repackage]]
== `spring-boot:repackage`
`org.springframework.boot:spring-boot-maven-plugin:2.3.8.RELEASE`

重新打包现有的 JAR 和 WAR 文件，以便可以使用 `java -jar` 从命令行执行它们。 使用 `layout=NONE` 也可以简单地用于打包具有嵌套依赖关系的 JAR（并且没有主类，因此不是可执行文件）。

[[goals-repackage-parameters-required]]
=== 必要参数
[cols="3,2,3"]
|===
| Name | Type | Default

| <<goals-repackage-parameters-details-outputDirectory,outputDirectory>>
| `File`
| `${project.build.directory}`

|===


[[goals-repackage-parameters-optional]]
=== 可选参数
[cols="3,2,3"]
|===
| Name | Type | Default

| <<goals-repackage-parameters-details-attach,attach>>
| `boolean`
| `true`

| <<goals-repackage-parameters-details-classifier,classifier>>
| `String`
|

| <<goals-repackage-parameters-details-embeddedLaunchScript,embeddedLaunchScript>>
| `File`
|

| <<goals-repackage-parameters-details-embeddedLaunchScriptProperties,embeddedLaunchScriptProperties>>
| `Properties`
|

| <<goals-repackage-parameters-details-excludeDevtools,excludeDevtools>>
| `boolean`
| `true`

| <<goals-repackage-parameters-details-excludeGroupIds,excludeGroupIds>>
| `String`
|

| <<goals-repackage-parameters-details-excludes,excludes>>
| `List`
|

| <<goals-repackage-parameters-details-executable,executable>>
| `boolean`
| `false`

| <<goals-repackage-parameters-details-includeSystemScope,includeSystemScope>>
| `boolean`
| `false`

| <<goals-repackage-parameters-details-includes,includes>>
| `List`
|

| <<goals-repackage-parameters-details-layers,layers>>
| `{spring-boot-docs}/maven-plugin/api/org/springframework/boot/maven/Layers.html[Layers]`
|

| <<goals-repackage-parameters-details-layout,layout>>
| `{spring-boot-docs}/maven-plugin/api/org/springframework/boot/maven/AbstractPackagerMojo.LayoutType.html[LayoutType]`
|

| <<goals-repackage-parameters-details-layoutFactory,layoutFactory>>
| `{spring-boot-docs}/api/org/springframework/boot/loader/tools/LayoutFactory.html[LayoutFactory]`
|

| <<goals-repackage-parameters-details-mainClass,mainClass>>
| `String`
|

| <<goals-repackage-parameters-details-outputTimestamp,outputTimestamp>>
| `String`
| `${project.build.outputTimestamp}`

| <<goals-repackage-parameters-details-requiresUnpack,requiresUnpack>>
| `List`
|

| <<goals-repackage-parameters-details-skip,skip>>
| `boolean`
| `false`

|===


[[goals-repackage-parameters-details]]
=== 参数细节


[[goals-repackage-parameters-details-attach]]
==== `attach`

将重新打包的文件安装到本地 Maven 存储库中或部署到远程存储库中。 如果未配置 `classifier`，它将替换普通的 jar。 如果配置了 `classifier`，则普通的 jar 和重新打包的 jar 不同，它将与普通的 jar 一起安装。 当该属性设置为 `false` 时，将不会安装或部署重新打包的 jar。

[cols="10h,90"]
|===

| Name
| `attach`

| Type
| `boolean`

| Default value
| `true`

| User property
|

| Since
| `1.4.0`

|===


[[goals-repackage-parameters-details-classifier]]
==== `classifier`

Classifier 添加到重新打包的 archive 中。 如果未给出，则 main artifact 将被重新打包的 archive 替换。 如果提供了 Classifier，则该 Classifier 还将用于确定要重新打包的源归档文件：如果已经存在带有该分类器的 artifact，则它将用作源并被替换。 如果不存在这样的 artifact ，则 main artifact 将用作源，并且重新打包的存档将作为带有该分类器的补充工件进行附加。 附加工件可以将其与原始工件一起部署，请参见  $1[$2]。

Classifier to add to the repackaged archive. If not given, the main artifact will be replaced by the repackaged archive. If given, the classifier will also be used to determine the source archive to repackage: if an artifact with that classifier already exists, it will be used as source and replaced. If no such artifact exists, the main artifact will be used as source and the repackaged archive will be attached as a supplemental artifact with that classifier. Attaching the artifact allows to deploy it alongside to the original one, see $1[$2].

[cols="10h,90"]
|===

| Name
| `classifier`

| Type
| `java.lang.String`

| Default value
|

| User property
|

| Since
| `1.0.0`

|===


[[goals-repackage-parameters-details-embeddedLaunchScript]]
==== `embeddedLaunchScript`
嵌入式启动脚本如果可以完全执行，则位于 jar 的前面。如果未指定，将使用 'Spring Boot' 默认脚本。

[cols="10h,90"]
|===

| Name
| `embeddedLaunchScript`

| Type
| `java.io.File`

| Default value
|

| User property
|

| Since
| `1.3.0`

|===


[[goals-repackage-parameters-details-embeddedLaunchScriptProperties]]
==== `embeddedLaunchScriptProperties`
应该在嵌入式启动脚本中扩展的属性。

[cols="10h,90"]
|===

| Name
| `embeddedLaunchScriptProperties`

| Type
| `java.util.Properties`

| Default value
|

| User property
|

| Since
| `1.3.0`

|===


[[goals-repackage-parameters-details-excludeDevtools]]
==== `excludeDevtools`
从重新打包的 archive 中排除 Spring Boot devtools.

[cols="10h,90"]
|===

| Name
| `excludeDevtools`

| Type
| `boolean`

| Default value
| `true`

| User property
| ``spring-boot.repackage.excludeDevtools``

| Since
| `1.3.0`

|===


[[goals-repackage-parameters-details-excludeGroupIds]]
==== `excludeGroupIds`
用逗号分隔的要排除的 groupId 名称列表（完全匹配）。

[cols="10h,90"]
|===

| Name
| `excludeGroupIds`

| Type
| `java.lang.String`

| Default value
|

| User property
| ``spring-boot.excludeGroupIds``

| Since
| `1.1.0`

|===


[[goals-repackage-parameters-details-excludes]]
==== `excludes`
要排除的 artifact 集合。 `Exclude` 元素必需定义 `groupId` 和 `artifactId` 属性以及可选的 `classifier` 属性。

[cols="10h,90"]
|===

| Name
| `excludes`

| Type
| `java.util.List`

| Default value
|

| User property
| ``spring-boot.excludes``

| Since
| `1.1.0`

|===


[[goals-repackage-parameters-details-executable]]
==== `executable`

Make a fully executable jar for *nix machines by prepending a launch script to the jar. <p> Currently, some tools do not accept this format so you may not always be able to use this technique. For example, `jar -xf` may silently fail to extract a jar or war that has been made fully-executable. It is recommended that you only enable this option if you intend to execute it directly, rather than running it with `java -jar` or deploying it to a servlet container.

[cols="10h,90"]
|===

| Name
| `executable`

| Type
| `boolean`

| Default value
| `false`

| User property
|

| Since
| `1.3.0`

|===


[[goals-repackage-parameters-details-includeSystemScope]]
==== `includeSystemScope`
Include system scoped dependencies.

[cols="10h,90"]
|===

| Name
| `includeSystemScope`

| Type
| `boolean`

| Default value
| `false`

| User property
|

| Since
| `1.4.0`

|===


[[goals-repackage-parameters-details-includes]]
==== `includes`
要包含的 artifact 集合。 `Exclude` 元素必需定义 `groupId` 和 `artifactId` 属性以及可选的 `classifier` 属性。

[cols="10h,90"]
|===

| Name
| `includes`

| Type
| `java.util.List`

| Default value
|

| User property
| ``spring-boot.includes``

| Since
| `1.2.0`

|===


[[goals-repackage-parameters-details-layers]]
==== `layers`
具有禁用层创建选项的层配置，排除分层工具的 jar，并提供自定义层配置文件。

[cols="10h,90"]
|===

| Name
| `layers`

| Type
| `{spring-boot-docs}/maven-plugin/api/org/springframework/boot/maven/Layers.html[org.springframework.boot.maven.Layers]`

| Default value
|

| User property
|

| Since
| `2.3.0`

|===


[[goals-repackage-parameters-details-layout]]
==== `layout`
archive 文件的类型（与依赖关系在内部的布局方式相对应）。 可能的值为 `JAR`，`WAR`，`ZIP`，`DIR`，`NONE`。 默认会推断 archive 类型。

[cols="10h,90"]
|===

| Name
| `layout`

| Type
| `{spring-boot-docs}/maven-plugin/api/org/springframework/boot/maven/AbstractPackagerMojo.LayoutType.html[org.springframework.boot.maven.AbstractPackagerMojo$LayoutType]`

| Default value
|

| User property
| ``spring-boot.repackage.layout``

| Since
| `1.0.0`

|===


[[goals-repackage-parameters-details-layoutFactory]]
==== `layoutFactory`
如果未设置布局，将用于创建可执行存档的 layout factory 。可以使用第三方实现来替代。

[cols="10h,90"]
|===

| Name
| `layoutFactory`

| Type
| `{spring-boot-docs}/api/org/springframework/boot/loader/tools/LayoutFactory.html[org.springframework.boot.loader.tools.LayoutFactory]`

| Default value
|

| User property
|

| Since
| `1.5.0`

|===


[[goals-repackage-parameters-details-mainClass]]
==== `mainClass`
主类的名称。如果未指定，将使用找到的第一个包含 'main' 方法的类。

[cols="10h,90"]
|===

| Name
| `mainClass`

| Type
| `java.lang.String`

| Default value
|

| User property
|

| Since
| `1.0.0`

|===


[[goals-repackage-parameters-details-outputDirectory]]
==== `outputDirectory`
指定生成 archive 文件的目录

[cols="10h,90"]
|===

| Name
| `outputDirectory`

| Type
| `java.io.File`

| Default value
| `${project.build.directory}`

| User property
|

| Since
| `1.0.0`

|===


[[goals-repackage-parameters-details-outputTimestamp]]
==== `outputTimestamp`
archive 时间戳，格式为 ISO 8601 (`yyyy-MM-dd'T'HH:mm:ssXXX`) 或一个整数，表示自该纪元以来的秒数。不支持打包 war。

[cols="10h,90"]
|===

| Name
| `outputTimestamp`

| Type
| `java.lang.String`

| Default value
| `${project.build.outputTimestamp}`

| User property
|

| Since
| `2.3.0`

|===


[[goals-repackage-parameters-details-requiresUnpack]]
==== `requiresUnpack`
从 fat jars 中解压缩才能运行的库列表。每个库的 `<dependency>` 都具有 `<groupId>` 和 `<artifactId>`，它们将在运行时解压缩。

[cols="10h,90"]
|===

| Name
| `requiresUnpack`

| Type
| `java.util.List`

| Default value
|

| User property
|

| Since
| `1.1.0`

|===


[[goals-repackage-parameters-details-skip]]
==== `skip`
跳过执行.

[cols="10h,90"]
|===

| Name
| `skip`

| Type
| `boolean`

| Default value
| `false`

| User property
| ``spring-boot.repackage.skip``

| Since
| `1.2.0`

|===
